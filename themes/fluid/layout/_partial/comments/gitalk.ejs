<% if(theme.gitalk.clientID && theme.gitalk.clientSecret && theme.gitalk.repo){ %>
  <div id="gitalk-container"></div>
  <script type="text/javascript">
    function loadGitalk() {
      addScript('<%= url_join(theme.static_prefix.blueimp_md5, 'js/md5.min.js') %>');
      addScript('<%= url_join(theme.static_prefix.gitalk, 'gitalk.min.js') %>', function () {
        var gitalk = new Gitalk({
          clientID: '<%= theme.gitalk.clientID %>',
          clientSecret: '<%= theme.gitalk.clientSecret %>',
          repo: '<%= theme.gitalk.repo %>',
          owner: '<%= theme.gitalk.owner %>',
          admin: <%- JSON.stringify(theme.gitalk.admin || []) %>,
          id: md5(<%= theme.gitalk.id %>),
          language: '<%= theme.gitalk.language %>',
          labels: <%- JSON.stringify(theme.gitalk.labels || []) %>,
          perPage: <%= theme.gitalk.perPage %>,
          pagerDirection: '<%= theme.gitalk.pagerDirection %>',
          createIssueManually: <%= theme.gitalk.createIssueManually %>,
          distractionFreeMode: <%= theme.gitalk.distractionFreeMode %>
        });
        gitalk.render('gitalk-container');
      });
    }
    waitElementVisible('gitalk-container', loadGitalk);
  </script>
<% } %>
